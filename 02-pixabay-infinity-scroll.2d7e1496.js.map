{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,0BAKA,MAAMC,EAAQC,SAASC,eAAe,eAChCC,EAAeF,SAASG,cAAc,YACtCC,EAAaJ,SAASG,cAAc,oBACpCE,EAAoB,IAAI,EAAAC,EAAAC,SAyB9B,SAASC,IACP,OAAOH,EACJI,aACAC,MAAKC,IACmB,IAAnBA,EAAQC,QACVC,EAAAhB,GAASiB,OAAOC,QACd,4EAIJ,MAAMC,EAAQL,EAAQM,UAEtB,OADAZ,EAAkBa,aAAaF,GACxBL,EAAQQ,KAAKC,QAClB,CAACC,EAAQC,IAejB,UAAsBC,aACpBA,EAAYC,cACZA,EAAaC,KACbA,EAAIC,MACJA,EAAKC,MACLA,EAAKC,SACLA,EAAQC,UACRA,IAEA,MAAO,qDAEUL,gBAA4BD,WAAsBE,+HAGhCC,qGAGAC,wGAGGC,yGAGCC,8D,CAtCdC,CAAaR,GAASD,GACzC,GACD,IAEFX,MAAKW,KAyCV,SAA8BA,GAC5BnB,EAAa6B,mBAAmB,YAAaV,E,CAzCzCW,CAAqBX,GAErBhB,EAAkB4B,UAAY/B,EAAagC,SAAStB,OAChDP,EAAkB4B,YAAc5B,EAAkBY,WACpDb,EAAW+B,UAAUC,IAAI,UAE3BC,EAAQC,SAAS,G,CA/CvBvC,EAAMwC,iBAAiB,UAGvB,SAAkBC,GAChBA,EAAEC,iBAEF,MAAMC,EAAOF,EAAEG,cACTC,EAAQF,EAAKG,SAASC,YAAYF,MAAMG,OAC9C1C,EAAkByC,YAAcF,EAChCxC,EAAW+B,UAAUa,OAAO,UA6E5B9C,EAAa+C,UAAY,GA1EzB5C,EAAkB6C,YAElB1C,IAAc2C,SAAQ,KACpBT,EAAKU,QACgC,IAAjClD,EAAagC,SAAStB,QACxBC,EAAAhB,GAASiB,OAAOuC,QACd,oBAAoBhD,EAAkBY,mBACvC,G,IAlBPZ,EAAkBI,aAwFlB,IAAI4B,EAAU,IAAIxB,EAAAyC,GAAJ,CAAmB,iBAEjCC,OAAOhB,iBAAiB,UAAU,KACXvC,SAASwD,gBAAgBC,wBAE7BC,OAAS1D,SAASwD,gBAAgBG,aAAe,KAChEnD,GAAa","sources":["src/js/infinity-scroll.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport GalleryApiService from './gallery-API';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst input = document.getElementById('search-form');\nconst photoGallery = document.querySelector('.gallery');\nconst loadingImg = document.querySelector('#loading-forever');\nconst galleryApiService = new GalleryApiService();\n\ninput.addEventListener('submit', onSubmit);\ngalleryApiService.getGallery();\n\nfunction onSubmit(e) {\n  e.preventDefault();\n\n  const form = e.currentTarget;\n  const value = form.elements.searchQuery.value.trim();\n  galleryApiService.searchQuery = value;\n  loadingImg.classList.remove('hidden');\n\n  clearGallery();\n  galleryApiService.resetPage();\n\n  fetchPhotos().finally(() => {\n    form.reset();\n    if (photoGallery.children.length !== 0)\n      Notiflix.Notify.success(\n        `Hooray! We found ${galleryApiService.totalHits} images`\n      );\n  });\n}\n\nfunction fetchPhotos() {\n  return galleryApiService\n    .getGallery()\n    .then(gallery => {\n      if (gallery.length === 0) {\n        Notiflix.Notify.failure(\n          'Sorry, there are no images matching your search query. Please try again.'\n        );\n      }\n\n      const total = gallery.totalHits;\n      galleryApiService.setTotalHits(total);\n      return gallery.hits.reduce(\n        (markup, photo) => createMarkup(photo) + markup,\n        ''\n      );\n    })\n    .then(markup => {\n      appendPhotoToGallery(markup);\n\n      galleryApiService.elemCount = photoGallery.children.length;\n      if (galleryApiService.elemCount === galleryApiService.totalHits) {\n        loadingImg.classList.add('hidden');\n      }\n      gallery.refresh();\n    });\n}\n\nfunction createMarkup({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `\n     <div class=\"photo-card\">\n        <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" /></a>\n        <div class=\"info\">\n            <p class=\"info-item\">\n                <b>Likes</b> <span>${likes}</span>\n            </p>\n            <p class=\"info-item\">\n                <b>Views</b> <span>${views}</span>\n            </p>\n            <p class=\"info-item\">\n                <b>Comments</b> <span>${comments}</span>\n            </p>\n            <p class=\"info-item\">\n                <b>Downloads</b> <span>${downloads}</span>\n            </p>\n        </div>\n    </div>\n    `;\n}\n\nfunction appendPhotoToGallery(markup) {\n  photoGallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearGallery() {\n  photoGallery.innerHTML = '';\n}\n\nlet gallery = new SimpleLightbox('.photo-card a');\n\nwindow.addEventListener('scroll', () => {\n  const documentRect = document.documentElement.getBoundingClientRect();\n\n  if (documentRect.bottom < document.documentElement.clientHeight + 100) {\n    fetchPhotos();\n  }\n});\n"],"names":["$7Y9D8","parcelRequire","$0294d88c66beb492$var$input","document","getElementById","$0294d88c66beb492$var$photoGallery","querySelector","$0294d88c66beb492$var$loadingImg","$0294d88c66beb492$var$galleryApiService","$6kCwr","default","$0294d88c66beb492$var$fetchPhotos","getGallery","then","gallery1","length","$parcel$interopDefault","Notify","failure","total","totalHits","setTotalHits","hits","reduce","markup","photo","webformatURL","largeImageURL","tags","likes","views","comments","downloads","$0294d88c66beb492$var$createMarkup","insertAdjacentHTML","$0294d88c66beb492$var$appendPhotoToGallery","elemCount","children","classList","add","$0294d88c66beb492$var$gallery","refresh","addEventListener","e","preventDefault","form","currentTarget","value","elements","searchQuery","trim","remove","innerHTML","resetPage","finally","reset","success","$fZKcF","window","documentElement","getBoundingClientRect","bottom","clientHeight"],"version":3,"file":"02-pixabay-infinity-scroll.2d7e1496.js.map"}