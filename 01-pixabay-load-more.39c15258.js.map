{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,aCAAC,EAAAD,EAAA,S,aAAeE,ECAZ,W,sBDAkBC,EACPC,G,IAAEC,EAAFD,EAAEC,SAAUC,EAAZF,EAAYE,S,aACtBC,KAAKC,OAASD,KAAKE,UAAUJ,GACzBC,EAAUC,KAAKG,OACdH,KAAKI,M,iBAEZC,IAAA,Y,MAAA,SAAUP,GACR,OAAOQ,SAASC,cAAcT,E,IAGhCO,IAAA,O,MAAA,WACEL,KAAKC,OAAOO,UAAUC,IAAI,S,IAG5BJ,IAAA,O,MAAA,WACEL,KAAKC,OAAOO,UAAUE,OAAO,S,IAG/BL,IAAA,U,MAAA,WACEL,KAAKC,OAAOU,UAAW,EACvBX,KAAKC,OAAOW,YAAc,Y,IAG5BP,IAAA,S,MAAA,WACEL,KAAKC,OAAOU,UAAW,EACvBX,KAAKC,OAAOW,YAAc,W,OCzB3B,G,aFMGC,EAAQP,SAASQ,eAAe,eAChCC,EAAeT,SAASC,cAAc,YACtCS,EAAc,IAAIrB,EAAY,CAAEG,SAAU,YAAaC,UAAU,IACjEkB,EAAoB,IAAI,EAAAC,EAAAC,SA0B9B,SAASC,IAEP,OADAJ,EAAYK,UACLJ,EACJK,aACAC,MAAK,SAAAC,GACmB,IAAnBA,EAAQC,SACVT,EAAYb,OACZuB,EAAAlC,GAASmC,OAAOC,QACd,6EAIJ,IAAMC,EAAQL,EAAQM,UAEtB,OADAb,EAAkBc,aAAaF,GACxBL,EAAQQ,KAAKC,QAClB,SAACC,EAAQC,G,OA8BfC,GADoBvC,EA7BkBsC,GA8BtCC,aACAC,EAFoBxC,EAEpBwC,cACAC,EAHoBzC,EAGpByC,KACAC,EAJoB1C,EAIpB0C,MACAC,EALoB3C,EAKpB2C,MACAC,EANoB5C,EAMpB4C,SACAC,EAPoB7C,EAOpB6C,UAEO,qDAEsCC,OAA5BN,EAAc,gBAAoCM,OAAtBP,EAAa,WAGvBO,OAHgCL,EAAK,+HAMrCK,OAHAJ,EAAM,qGAMHI,OAHHH,EAAM,wGAMFG,OAHDF,EAAS,yGAGEE,OAAVD,EAAU,+DApDFR,EA6BjD,IAAsBrC,EACpBuC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,C,GAnCM,G,IAGHnB,MAAK,SAAAW,GAGJ,GAoDN,SAA8BA,GAC5BnB,EAAa6B,mBAAmB,YAAaV,E,CAvDzCW,CAAqBX,GAEU,IAA3BjB,EAAkB6B,KAAY,CAChC,IAAQC,EAAuBzC,SAC5BC,cAAc,YACdyC,kBAAkBC,wBAFbC,OAGRC,OAAOC,SAAS,CACdC,IAAkB,EAAbN,EACLO,SAAU,U,CAIdtC,EAAYuC,SACZtC,EAAkBuC,UAAYzC,EAAa0C,SAAShC,OAChDR,EAAkBuC,YAAcvC,EAAkBa,YACpDJ,EAAAlC,GAASmC,OAAO+B,QACd,8DAEF1C,EAAYb,QAEdwD,EAAQC,S,IAhEd/C,EAAMgD,iBAAiB,UAIvB,SAAkBC,GAChBA,EAAEC,iBAEF,IAAMC,EAAOF,EAAEG,cACTC,EAAQF,EAAKG,SAASC,YAAYF,MAAMG,OAC9CpD,EAAkBmD,YAAcF,EA8FhCnD,EAAauD,UAAY,GA3FzBrD,EAAkBsD,YAClBvD,EAAYZ,OAEZgB,IAAcoD,SAAQ,WACpBR,EAAKS,QACgC,IAAjC1D,EAAa0C,SAAShC,QACxBC,EAAAlC,GAASmC,OAAO+C,QACd,oBAAgD/B,OAA5B1B,EAAkBa,UAAU,W,OAlBxDd,EAAYf,OAAO4D,iBAAiB,QAASzC,GAC7CH,EAAkBK,aAwGlB,IAAIqC,EAAU,IAAIjC,EAAAiD,GAAJ,CAAmB,gB","sources":["src/js/indexloadmore.js","src/js/components/load-more-btn.js","<<jsx-config-pragma.js>>"],"sourcesContent":["import Notiflix from 'notiflix';\nimport GalleryApiService from './gallery-API';\nimport LoadMoreBtn from './components/load-more-btn';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst input = document.getElementById('search-form');\nconst photoGallery = document.querySelector('.gallery');\nconst loadMoreBtn = new LoadMoreBtn({ selector: '#loadMore', isHidden: true });\nconst galleryApiService = new GalleryApiService();\n\ninput.addEventListener('submit', onSubmit);\nloadMoreBtn.button.addEventListener('click', fetchPhotos);\ngalleryApiService.getGallery();\n\nfunction onSubmit(e) {\n  e.preventDefault();\n\n  const form = e.currentTarget;\n  const value = form.elements.searchQuery.value.trim();\n  galleryApiService.searchQuery = value;\n\n  clearGallery();\n  galleryApiService.resetPage();\n  loadMoreBtn.show();\n\n  fetchPhotos().finally(() => {\n    form.reset();\n    if (photoGallery.children.length !== 0)\n      Notiflix.Notify.success(\n        `Hooray! We found ${galleryApiService.totalHits} images`\n      );\n  });\n}\n\nfunction fetchPhotos() {\n  loadMoreBtn.disable();\n  return galleryApiService\n    .getGallery()\n    .then(gallery => {\n      if (gallery.length === 0) {\n        loadMoreBtn.hide();\n        Notiflix.Notify.failure(\n          'Sorry, there are no images matching your search query. Please try again.'\n        );\n      }\n\n      const total = gallery.totalHits;\n      galleryApiService.setTotalHits(total);\n      return gallery.hits.reduce(\n        (markup, photo) => createMarkup(photo) + markup,\n        ''\n      );\n    })\n    .then(markup => {\n      appendPhotoToGallery(markup);\n\n      if (galleryApiService.page !== 2) {\n        const { height: cardHeight } = document\n          .querySelector('.gallery')\n          .firstElementChild.getBoundingClientRect();\n        window.scrollBy({\n          top: cardHeight * 2,\n          behavior: 'smooth',\n        });\n      }\n\n      loadMoreBtn.enable();\n      galleryApiService.elemCount = photoGallery.children.length;\n      if (galleryApiService.elemCount === galleryApiService.totalHits) {\n        Notiflix.Notify.warning(\n          \"We're sorry, but you've reached the end of search results.\"\n        );\n        loadMoreBtn.hide();\n      }\n      gallery.refresh();\n    });\n}\n\nfunction createMarkup({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `\n     <div class=\"photo-card\">\n        <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" /></a>\n        <div class=\"info\">\n            <p class=\"info-item\">\n                <b>Likes</b> <span>${likes}</span>\n            </p>\n            <p class=\"info-item\">\n                <b>Views</b> <span>${views}</span>\n            </p>\n            <p class=\"info-item\">\n                <b>Comments</b> <span>${comments}</span>\n            </p>\n            <p class=\"info-item\">\n                <b>Downloads</b> <span>${downloads}</span>\n            </p>\n        </div>\n    </div>\n    `;\n}\n\nfunction appendPhotoToGallery(markup) {\n  photoGallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearGallery() {\n  photoGallery.innerHTML = '';\n}\n\nlet gallery = new SimpleLightbox('.photo-card a');\n","export default class LoadMoreBtn {\n  constructor({ selector, isHidden }) {\n    this.button = this.getButton(selector);\n    if (isHidden) this.hide();\n    else this.show();\n  }\n  getButton(selector) {\n    return document.querySelector(selector);\n  }\n\n  hide() {\n    this.button.classList.add('hidden');\n  }\n\n  show() {\n    this.button.classList.remove('hidden');\n  }\n\n  disable() {\n    this.button.disabled = true;\n    this.button.textContent = 'Loading...';\n  }\n\n  enable() {\n    this.button.disabled = false;\n    this.button.textContent = 'Load More';\n  }\n}\n",null],"names":["$6JpON","parcelRequire","$8MBJY","$a59411585e32db69$export$2e2bcd8739ae039","LoadMoreBtn","param","selector","isHidden","this","button","getButton","hide","show","key","document","querySelector","classList","add","remove","disabled","textContent","$8637956d7fa9b35d$var$input","getElementById","$8637956d7fa9b35d$var$photoGallery","$8637956d7fa9b35d$var$loadMoreBtn","$8637956d7fa9b35d$var$galleryApiService","$2rXFd","default","$8637956d7fa9b35d$var$fetchPhotos","disable","getGallery","then","gallery1","length","$parcel$interopDefault","Notify","failure","total","totalHits","setTotalHits","hits","reduce","markup","photo","webformatURL","largeImageURL","tags","likes","views","comments","downloads","concat","insertAdjacentHTML","$8637956d7fa9b35d$var$appendPhotoToGallery","page","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","enable","elemCount","children","warning","$8637956d7fa9b35d$var$gallery","refresh","addEventListener","e","preventDefault","form","currentTarget","value","elements","searchQuery","trim","innerHTML","resetPage","finally","reset","success","$5IjG7"],"version":3,"file":"01-pixabay-load-more.39c15258.js.map"}