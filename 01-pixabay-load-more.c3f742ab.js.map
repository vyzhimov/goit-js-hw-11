{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,uCAMA,MAAMC,EAAQC,SAASC,eAAe,eAChCC,EAAeF,SAASG,cAAc,YACtCC,EAAc,IAAI,EAAAC,EAAAC,SAAY,CAAEC,SAAU,YAAaC,UAAU,IACjEC,EAAoB,IAAI,EAAAC,EAAAJ,SAyB9B,SAASK,IAEP,OADAP,EAAYQ,UACLH,EACJI,aACAC,MAAKC,IACwB,IAAxBA,EAAQC,KAAKC,QAAgD,IAAhCR,EAAkBS,YACjDd,EAAYe,OACZC,EAAAvB,GAASwB,OAAOC,QACd,6EAIJ,MAAMC,EAAQR,EAAQS,UAEtB,OADAf,EAAkBgB,aAAaF,GACxBR,EAAQC,KAAKU,QAClB,CAACC,EAAQC,IAgCjB,UAAsBC,aACpBA,EAAYC,cACZA,EAAaC,KACbA,EAAIC,MACJA,EAAKC,MACLA,EAAKC,SACLA,EAAQC,UACRA,IAEA,MAAO,qDAEUL,gBAA4BD,WAAsBE,+HAGhCC,qGAGAC,wGAGGC,yGAGCC,8D,CAvDdC,CAAaR,GAASD,GACzC,GACD,IAEFb,MAAKa,IAGJ,GAuDN,SAA8BA,GAC5BzB,EAAamC,mBAAmB,YAAaV,E,CA1DzCW,CAAqBX,GAEU,IAA3BlB,EAAkB8B,KAAY,CAChC,MAAQC,OAAQC,GAAezC,SAC5BG,cAAc,YACduC,kBAAkBC,wBACrBC,OAAOC,SAAS,CACdC,IAAkB,EAAbL,EAAiB,GACtBM,SAAU,U,CAId3C,EAAY4C,SACZvC,EAAkBS,UAAYhB,EAAa+C,SAAShC,OAElDR,EAAkBS,YAAcT,EAAkBe,WAClDf,EAAkBS,UAAY,IAE9BE,EAAAvB,GAASwB,OAAO6B,QACd,8DAEF9C,EAAYe,QAEdgC,EAAQC,SAAS,G,CAlEvBrD,EAAMsD,iBAAiB,UAGvB,SAAkBC,GAChBA,EAAEC,iBAEF,MAAMC,EAAOF,EAAEG,cACTC,EAAQF,EAAKG,SAASC,YAAYF,MAAMG,OAC9CpD,EAAkBmD,YAAcF,EAiGhCxD,EAAa4D,UAAY,GA9FzBrD,EAAkBsD,YAClB3D,EAAY4D,OAEZrD,IAAcsD,SAAQ,KACpBT,EAAKU,QACgC,IAAjChE,EAAa+C,SAAShC,QACxBG,EAAAvB,GAASwB,OAAO8C,QACd,oBAAoB1D,EAAkBe,mBACvC,G,IAlBPpB,EAAYgE,OAAOf,iBAAiB,QAAS1C,GA2G7C,IAAIwC,EAAU,IAAI/B,EAAAiD,GAAJ,CAAmB","sources":["src/js/indexloadmore.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport GalleryApiService from './gallery-API';\nimport LoadMoreBtn from './components/load-more-btn';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst input = document.getElementById('search-form');\nconst photoGallery = document.querySelector('.gallery');\nconst loadMoreBtn = new LoadMoreBtn({ selector: '#loadMore', isHidden: true });\nconst galleryApiService = new GalleryApiService();\n\ninput.addEventListener('submit', onSubmit);\nloadMoreBtn.button.addEventListener('click', fetchPhotos);\n\nfunction onSubmit(e) {\n  e.preventDefault();\n\n  const form = e.currentTarget;\n  const value = form.elements.searchQuery.value.trim();\n  galleryApiService.searchQuery = value;\n\n  clearGallery();\n  galleryApiService.resetPage();\n  loadMoreBtn.show();\n\n  fetchPhotos().finally(() => {\n    form.reset();\n    if (photoGallery.children.length !== 0)\n      Notiflix.Notify.success(\n        `Hooray! We found ${galleryApiService.totalHits} images`\n      );\n  });\n}\n\nfunction fetchPhotos() {\n  loadMoreBtn.disable();\n  return galleryApiService\n    .getGallery()\n    .then(gallery => {\n      if (gallery.hits.length === 0 && galleryApiService.elemCount === 0) {\n        loadMoreBtn.hide();\n        Notiflix.Notify.failure(\n          'Sorry, there are no images matching your search query. Please try again.'\n        );\n      }\n\n      const total = gallery.totalHits;\n      galleryApiService.setTotalHits(total);\n      return gallery.hits.reduce(\n        (markup, photo) => createMarkup(photo) + markup,\n        ''\n      );\n    })\n    .then(markup => {\n      appendPhotoToGallery(markup);\n\n      if (galleryApiService.page !== 2) {\n        const { height: cardHeight } = document\n          .querySelector('.gallery')\n          .firstElementChild.getBoundingClientRect();\n        window.scrollBy({\n          top: cardHeight * 2 - 20,\n          behavior: 'smooth',\n        });\n      }\n\n      loadMoreBtn.enable();\n      galleryApiService.elemCount = photoGallery.children.length;\n      if (\n        galleryApiService.elemCount === galleryApiService.totalHits &&\n        galleryApiService.elemCount > 1\n      ) {\n        Notiflix.Notify.warning(\n          \"We're sorry, but you've reached the end of search results.\"\n        );\n        loadMoreBtn.hide();\n      }\n      gallery.refresh();\n    });\n}\n\nfunction createMarkup({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `\n     <div class=\"photo-card\">\n        <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" /></a>\n        <div class=\"info\">\n            <p class=\"info-item\">\n                <b>Likes</b> <span>${likes}</span>\n            </p>\n            <p class=\"info-item\">\n                <b>Views</b> <span>${views}</span>\n            </p>\n            <p class=\"info-item\">\n                <b>Comments</b> <span>${comments}</span>\n            </p>\n            <p class=\"info-item\">\n                <b>Downloads</b> <span>${downloads}</span>\n            </p>\n        </div>\n    </div>\n    `;\n}\n\nfunction appendPhotoToGallery(markup) {\n  photoGallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearGallery() {\n  photoGallery.innerHTML = '';\n}\n\nlet gallery = new SimpleLightbox('.photo-card a');\n"],"names":["$7Y9D8","parcelRequire","$be4dcc6ed68f9042$var$input","document","getElementById","$be4dcc6ed68f9042$var$photoGallery","querySelector","$be4dcc6ed68f9042$var$loadMoreBtn","$frEnH","default","selector","isHidden","$be4dcc6ed68f9042$var$galleryApiService","$6kCwr","$be4dcc6ed68f9042$var$fetchPhotos","disable","getGallery","then","gallery1","hits","length","elemCount","hide","$parcel$interopDefault","Notify","failure","total","totalHits","setTotalHits","reduce","markup","photo","webformatURL","largeImageURL","tags","likes","views","comments","downloads","$be4dcc6ed68f9042$var$createMarkup","insertAdjacentHTML","$be4dcc6ed68f9042$var$appendPhotoToGallery","page","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","enable","children","warning","$be4dcc6ed68f9042$var$gallery","refresh","addEventListener","e","preventDefault","form","currentTarget","value","elements","searchQuery","trim","innerHTML","resetPage","show","finally","reset","success","button","$fZKcF"],"version":3,"file":"01-pixabay-load-more.c3f742ab.js.map"}